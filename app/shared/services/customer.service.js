"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var http_1 = require("@angular/common/http");
var core_1 = require("@angular/core");
var service_1 = require("~/shared/services/service");
var config_1 = require("../config");
var CustomerService = /** @class */ (function (_super) {
    __extends(CustomerService, _super);
    function CustomerService(http) {
        var _this = _super.call(this) || this;
        _this.http = http;
        return _this;
    }
    CustomerService.prototype.getAllByGroepAction = function (groepId) {
        var headers = this.createRequestHeader();
        var url = config_1.Config.apiUrl + "api/customers/groep/" + groepId;
        console.dir(url);
        return this.http.get(url, { headers: headers });
    };
    CustomerService.prototype.getAllByGroepForBillAction = function (groepId) {
        var headers = this.createRequestHeader();
        var url = config_1.Config.apiUrl + "api/customers/groep/bill/" + groepId;
        console.dir(url);
        return this.http.get(url, { headers: headers });
    };
    CustomerService.prototype.getAllByGroepForCheckinAction = function (groepId) {
        var headers = this.createRequestHeader();
        var url = config_1.Config.apiUrl + "api/customers/groep/checkin/" + groepId;
        console.dir(url);
        return this.http.get(url, { headers: headers });
    };
    CustomerService.prototype.getAllByGroepForPaymentsAction = function (groepId) {
        var headers = this.createRequestHeader();
        var url = config_1.Config.apiUrl + "api/customers/groep/payments/" + groepId;
        console.dir(url);
        return this.http.get(url, { headers: headers });
    };
    CustomerService.prototype.getBillByCustomerId = function (customerId) {
        var headers = this.createRequestHeader();
        var url = config_1.Config.apiUrl + "api/customers/bill/" + customerId;
        console.dir(url);
        return this.http.get(url, { headers: headers });
    };
    CustomerService.prototype.getCheckinByCustomerId = function (customerId) {
        var headers = this.createRequestHeader();
        var url = config_1.Config.apiUrl + "api/customers/checkin/detail/" + customerId;
        console.dir(url);
        return this.http.get(url, { headers: headers });
    };
    CustomerService.prototype.getAllByAgencyForLodgingAndLocationAndPeriodAction = function (agencyId, locationId, date) {
        var headers = this.createRequestHeader();
        var url = config_1.Config.apiUrl + "api/customers/lodging/" + agencyId + "/" + locationId + "/" + date;
        console.dir(url);
        return this.http.get(url, { headers: headers });
    };
    CustomerService.prototype.getAllByGroepWithRaftingOptionAction = function (groepId) {
        var headers = this.createRequestHeader();
        var url = config_1.Config.apiUrl + "api/customers/groep/rafting/" + groepId;
        console.dir(url);
        return this.http.get(url, { headers: headers });
    };
    CustomerService.prototype.getAllByGroepWithCanyoningOptionAction = function (groepId) {
        var headers = this.createRequestHeader();
        var url = config_1.Config.apiUrl + "api/customers/groep/canyoning/" + groepId;
        console.dir(url);
        return this.http.get(url, { headers: headers });
    };
    CustomerService.prototype.getAllByGroepWithSpecialOptionAction = function (groepId) {
        var headers = this.createRequestHeader();
        var url = config_1.Config.apiUrl + "api/customers/groep/special/" + groepId;
        console.dir(url);
        return this.http.get(url, { headers: headers });
    };
    CustomerService.prototype.getBusGoCustomersByWeek = function (date) {
        var headers = this.createRequestHeader();
        var url = config_1.Config.apiUrl + "api/customers/bus/go/" + date;
        console.dir(url);
        return this.http.get(url, { headers: headers });
    };
    CustomerService.prototype.getBusBackCustomersByWeek = function (date) {
        var headers = this.createRequestHeader();
        var url = config_1.Config.apiUrl + "api/customers/bus/back/" + date;
        console.dir(url);
        return this.http.get(url, { headers: headers });
    };
    CustomerService.prototype.getAllByAllInTypeForLocationAndPeriodAction = function (locationId, date) {
        var headers = this.createRequestHeader();
        var url = config_1.Config.apiUrl + "api/customers/all-in-type/" + locationId + "/" + date;
        console.dir(url);
        return this.http.get(url, { headers: headers });
    };
    CustomerService.prototype.putCustomerSizeAction = function (groepCustomer) {
        var headers = this.createRequestHeader();
        var url = config_1.Config.apiUrl + "api/customers/suitsize/" + groepCustomer.id;
        console.dir(url);
        return this.http.put(url, groepCustomer, { headers: headers });
    };
    CustomerService.prototype.putCustomerRaftingOptionAction = function (raftingCustomer) {
        var headers = this.createRequestHeader();
        var url = config_1.Config.apiUrl + "api/customers/rafting/" + raftingCustomer.id;
        console.dir(url);
        return this.http.put(url, raftingCustomer, { headers: headers });
    };
    CustomerService.prototype.putCustomerCanyoningOptionAction = function (canyoningCustomer) {
        var headers = this.createRequestHeader();
        var url = config_1.Config.apiUrl + "api/customers/canyoning/" + canyoningCustomer.id;
        console.dir(url);
        return this.http.put(url, canyoningCustomer, { headers: headers });
    };
    CustomerService.prototype.putCustomerSpecialOptionAction = function (specialCustomer) {
        var headers = this.createRequestHeader();
        var url = config_1.Config.apiUrl + "api/customers/special/" + specialCustomer.id;
        console.dir(url);
        return this.http.put(url, specialCustomer, { headers: headers });
    };
    CustomerService.prototype.putBusGoCustomerAction = function (busCustomer) {
        var headers = this.createRequestHeader();
        var url = config_1.Config.apiUrl + "api/customers/bus/go/" + busCustomer.id;
        console.dir(url);
        return this.http.put(url, busCustomer, { headers: headers });
    };
    CustomerService.prototype.putBusBackCustomerAction = function (busCustomer) {
        var headers = this.createRequestHeader();
        var url = config_1.Config.apiUrl + "api/customers/bus/back/" + busCustomer.id;
        console.dir(url);
        return this.http.put(url, busCustomer, { headers: headers });
    };
    CustomerService.prototype.putLodgingLayoutCustomerAction = function (lodgingCustomer) {
        var headers = this.createRequestHeader();
        var url = config_1.Config.apiUrl + "api/customers/lodging/layout/" + lodgingCustomer.id;
        console.dir(url);
        return this.http.put(url, lodgingCustomer, { headers: headers });
    };
    CustomerService.prototype.putBillPayedAction = function (billCustomerTotal) {
        var headers = this.createRequestHeader();
        var url = config_1.Config.apiUrl + "api/customers/bill/" + billCustomerTotal.id;
        console.dir(url);
        return this.http.put(url, billCustomerTotal, { headers: headers });
    };
    CustomerService.prototype.putCheckinCustomerAction = function (checkinCustomer) {
        var headers = this.createRequestHeader();
        var url = config_1.Config.apiUrl + "api/customers/checkin/" + checkinCustomer.id;
        console.dir(url);
        return this.http.put(url, checkinCustomer, { headers: headers });
    };
    CustomerService.prototype.putCheckinCustomerDetailAction = function (checkinCustomerDetail) {
        var headers = this.createRequestHeader();
        var url = config_1.Config.apiUrl + "api/customers/checkin/detail/" + checkinCustomerDetail.id;
        console.dir(url);
        return this.http.put(url, checkinCustomerDetail, { headers: headers });
    };
    CustomerService.prototype.putPaymentToCustomerAction = function (payment) {
        var headers = this.createRequestHeader();
        var url = config_1.Config.apiUrl + "api/customers/payments/" + payment.customerId;
        console.dir(url);
        return this.http.put(url, payment, { headers: headers });
    };
    CustomerService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [http_1.HttpClient])
    ], CustomerService);
    return CustomerService;
}(service_1.Service));
exports.CustomerService = CustomerService;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3VzdG9tZXIuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImN1c3RvbWVyLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSw2Q0FBa0Q7QUFDbEQsc0NBQTJDO0FBaUIzQyxxREFBb0Q7QUFDcEQsb0NBQW1DO0FBS25DO0lBQXFDLG1DQUFPO0lBQ3hDLHlCQUFvQixJQUFnQjtRQUFwQyxZQUNJLGlCQUFPLFNBQ1Y7UUFGbUIsVUFBSSxHQUFKLElBQUksQ0FBWTs7SUFFcEMsQ0FBQztJQUVELDZDQUFtQixHQUFuQixVQUFvQixPQUFPO1FBQ3ZCLElBQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO1FBQzNDLElBQU0sR0FBRyxHQUFHLGVBQU0sQ0FBQyxNQUFNLEdBQUcsc0JBQXNCLEdBQUcsT0FBTyxDQUFDO1FBQzdELE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7UUFFakIsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFzQixHQUFHLEVBQUUsRUFBRSxPQUFPLFNBQUEsRUFBRSxDQUFDLENBQUM7SUFDaEUsQ0FBQztJQUVELG9EQUEwQixHQUExQixVQUEyQixPQUFPO1FBQzlCLElBQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO1FBQzNDLElBQU0sR0FBRyxHQUFHLGVBQU0sQ0FBQyxNQUFNLEdBQUcsMkJBQTJCLEdBQUcsT0FBTyxDQUFDO1FBQ2xFLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7UUFFakIsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFzQixHQUFHLEVBQUUsRUFBRSxPQUFPLFNBQUEsRUFBRSxDQUFDLENBQUM7SUFDaEUsQ0FBQztJQUVELHVEQUE2QixHQUE3QixVQUE4QixPQUFPO1FBQ2pDLElBQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxDQUFD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QyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxPQUFPLEVBQUUsRUFBRSxPQUFPLFNBQUEsRUFBRSxDQUFDLENBQUM7SUFDcEQsQ0FBQztJQW5NUSxlQUFlO1FBRDNCLGlCQUFVLEVBQUU7eUNBRWlCLGlCQUFVO09BRDNCLGVBQWUsQ0FvTTNCO0lBQUQsc0JBQUM7Q0FBQSxBQXBNRCxDQUFxQyxpQkFBTyxHQW9NM0M7QUFwTVksMENBQWUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBIdHRwQ2xpZW50IH0gZnJvbSBcIkBhbmd1bGFyL2NvbW1vbi9odHRwXCI7XG5pbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tIFwicnhqc1wiO1xuXG5pbXBvcnQgeyBCaWxsQ3VzdG9tZXIgfSBmcm9tIFwifi9zaGFyZWQvbW9kZWxzL2JpbGxDdXN0b21lci5tb2RlbFwiO1xuaW1wb3J0IHsgQmlsbEN1c3RvbWVyRGV0YWlsIH0gZnJvbSBcIn4vc2hhcmVkL21vZGVscy9iaWxsQ3VzdG9tZXJEZXRhaWwubW9kZWxcIjtcbmltcG9ydCB7IEJpbGxDdXN0b21lclRvdGFsIH0gZnJvbSBcIn4vc2hhcmVkL21vZGVscy9iaWxsQ3VzdG9tZXJUb3RhbC5tb2RlbFwiO1xuaW1wb3J0IHsgQnVzQ3VzdG9tZXIgfSBmcm9tIFwifi9zaGFyZWQvbW9kZWxzL2J1c0N1c3RvbWVyLm1vZGVsXCI7XG5pbXBvcnQgeyBDYW55b25pbmdDdXN0b21lciB9IGZyb20gXCJ+L3NoYXJlZC9tb2RlbHMvY2FueW9uaW5nQ3VzdG9tZXIubW9kZWxcIjtcbmltcG9ydCB7IENoZWNraW5CdXMgfSBmcm9tIFwifi9zaGFyZWQvbW9kZWxzL2NoZWNraW5CdXMubW9kZWxcIjtcbmltcG9ydCB7IFBheW1lbnRDdXN0b21lciB9IGZyb20gXCJ+L3NoYXJlZC9tb2RlbHMvcGF5bWVudEN1c3RvbWVyLm1vZGVsXCI7XG5pbXBvcnQgeyBMb2RnaW5nIH0gZnJvbSBcIn4vc2hhcmVkL21vZGVscy9sb2RnaW5nLm1vZGVsXCI7XG5pbXBvcnQgeyBMb2RnaW5nQ3VzdG9tZXIgfSBmcm9tIFwifi9zaGFyZWQvbW9kZWxzL2xvZGdpbmdDdXN0b21lci5tb2RlbFwiO1xuaW1wb3J0IHsgUGF5bWVudCB9IGZyb20gXCJ+L3NoYXJlZC9tb2RlbHMvcGF5bWVudC5tb2RlbFwiO1xuaW1wb3J0IHsgUmFmdGluZ0N1c3RvbWVyIH0gZnJvbSBcIn4vc2hhcmVkL21vZGVscy9yYWZ0aW5nQ3VzdG9tZXIubW9kZWxcIjtcbmltcG9ydCB7IFNpemVDdXN0b21lciB9IGZyb20gXCJ+L3NoYXJlZC9tb2RlbHMvc2l6ZUN1c3RvbWVyLm1vZGVsXCI7XG5pbXBvcnQgeyBTcGVjaWFsQ3VzdG9tZXIgfSBmcm9tIFwifi9zaGFyZWQvbW9kZWxzL3NwZWNpYWxDdXN0b21lci5tb2RlbFwiO1xuaW1wb3J0IHsgVm9scGVuc2lvbiB9IGZyb20gXCJ+L3NoYXJlZC9tb2RlbHMvdm9scGVuc2lvbi5tb2RlbFwiO1xuaW1wb3J0IHsgU2VydmljZSB9IGZyb20gXCJ+L3NoYXJlZC9zZXJ2aWNlcy9zZXJ2aWNlXCI7XG5pbXBvcnQgeyBDb25maWcgfSBmcm9tIFwiLi4vY29uZmlnXCI7XG5pbXBvcnQge0NoZWNraW5DdXN0b21lcn0gZnJvbSBcIn4vc2hhcmVkL21vZGVscy9jaGVja2luQ3VzdG9tZXIubW9kZWxcIjtcbmltcG9ydCB7Q2hlY2tpbkN1c3RvbWVyRGV0YWlsfSBmcm9tIFwifi9zaGFyZWQvbW9kZWxzL2NoZWNraW5DdXN0b21lckRldGFpbC5tb2RlbFwiO1xuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgQ3VzdG9tZXJTZXJ2aWNlIGV4dGVuZHMgU2VydmljZSB7XG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBodHRwOiBIdHRwQ2xpZW50KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgfVxuXG4gICAgZ2V0QWxsQnlHcm9lcEFjdGlvbihncm9lcElkKTogT2JzZXJ2YWJsZTxBcnJheTxTaXplQ3VzdG9tZXI+PiB7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSB0aGlzLmNyZWF0ZVJlcXVlc3RIZWFkZXIoKTtcbiAgICAgICAgY29uc3QgdXJsID0gQ29uZmlnLmFwaVVybCArIFwiYXBpL2N1c3RvbWVycy9ncm9lcC9cIiArIGdyb2VwSWQ7XG4gICAgICAgIGNvbnNvbGUuZGlyKHVybCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQ8QXJyYXk8U2l6ZUN1c3RvbWVyPj4odXJsLCB7IGhlYWRlcnMgfSk7XG4gICAgfVxuXG4gICAgZ2V0QWxsQnlHcm9lcEZvckJpbGxBY3Rpb24oZ3JvZXBJZCk6IE9ic2VydmFibGU8QXJyYXk8QmlsbEN1c3RvbWVyPj4ge1xuICAgICAgICBjb25zdCBoZWFkZXJzID0gdGhpcy5jcmVhdGVSZXF1ZXN0SGVhZGVyKCk7XG4gICAgICAgIGNvbnN0IHVybCA9IENvbmZpZy5hcGlVcmwgKyBcImFwaS9jdXN0b21lcnMvZ3JvZXAvYmlsbC9cIiArIGdyb2VwSWQ7XG4gICAgICAgIGNvbnNvbGUuZGlyKHVybCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQ8QXJyYXk8QmlsbEN1c3RvbWVyPj4odXJsLCB7IGhlYWRlcnMgfSk7XG4gICAgfVxuXG4gICAgZ2V0QWxsQnlHcm9lcEZvckNoZWNraW5BY3Rpb24oZ3JvZXBJZCk6IE9ic2VydmFibGU8QXJyYXk8Q2hlY2tpbkN1c3RvbWVyPj4ge1xuICAgICAgICBjb25zdCBoZWFkZXJzID0gdGhpcy5jcmVhdGVSZXF1ZXN0SGVhZGVyKCk7XG4gICAgICAgIGNvbnN0IHVybCA9IENvbmZpZy5hcGlVcmwgKyBcImFwaS9jdXN0b21lcnMvZ3JvZXAvY2hlY2tpbi9cIiArIGdyb2VwSWQ7XG4gICAgICAgIGNvbnNvbGUuZGlyKHVybCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQ8QXJyYXk8Q2hlY2tpbkN1c3RvbWVyPj4odXJsLCB7IGhlYWRlcnMgfSk7XG4gICAgfVxuXG4gICAgZ2V0QWxsQnlHcm9lcEZvclBheW1lbnRzQWN0aW9uKGdyb2VwSWQpOiBPYnNlcnZhYmxlPEFycmF5PFBheW1lbnRDdXN0b21lcj4+IHtcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IHRoaXMuY3JlYXRlUmVxdWVzdEhlYWRlcigpO1xuICAgICAgICBjb25zdCB1cmwgPSBDb25maWcuYXBpVXJsICsgXCJhcGkvY3VzdG9tZXJzL2dyb2VwL3BheW1lbnRzL1wiICsgZ3JvZXBJZDtcbiAgICAgICAgY29uc29sZS5kaXIodXJsKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLmdldDxBcnJheTxQYXltZW50Q3VzdG9tZXI+Pih1cmwsIHsgaGVhZGVycyB9KTtcbiAgICB9XG5cbiAgICBnZXRCaWxsQnlDdXN0b21lcklkKGN1c3RvbWVySWQpOiBPYnNlcnZhYmxlPEJpbGxDdXN0b21lckRldGFpbD4ge1xuICAgICAgICBjb25zdCBoZWFkZXJzID0gdGhpcy5jcmVhdGVSZXF1ZXN0SGVhZGVyKCk7XG4gICAgICAgIGNvbnN0IHVybCA9IENvbmZpZy5hcGlVcmwgKyBcImFwaS9jdXN0b21lcnMvYmlsbC9cIiArIGN1c3RvbWVySWQ7XG4gICAgICAgIGNvbnNvbGUuZGlyKHVybCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQ8QmlsbEN1c3RvbWVyRGV0YWlsPih1cmwsIHsgaGVhZGVycyB9KTtcbiAgICB9XG5cbiAgICBnZXRDaGVja2luQnlDdXN0b21lcklkKGN1c3RvbWVySWQpOiBPYnNlcnZhYmxlPENoZWNraW5DdXN0b21lckRldGFpbD4ge1xuICAgICAgICBjb25zdCBoZWFkZXJzID0gdGhpcy5jcmVhdGVSZXF1ZXN0SGVhZGVyKCk7XG4gICAgICAgIGNvbnN0IHVybCA9IENvbmZpZy5hcGlVcmwgKyBcImFwaS9jdXN0b21lcnMvY2hlY2tpbi9kZXRhaWwvXCIgKyBjdXN0b21lcklkO1xuICAgICAgICBjb25zb2xlLmRpcih1cmwpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0PENoZWNraW5DdXN0b21lckRldGFpbD4odXJsLCB7IGhlYWRlcnMgfSk7XG4gICAgfVxuXG4gICAgZ2V0QWxsQnlBZ2VuY3lGb3JMb2RnaW5nQW5kTG9jYXRpb25BbmRQZXJpb2RBY3Rpb24oYWdlbmN5SWQsIGxvY2F0aW9uSWQsIGRhdGUpOiBPYnNlcnZhYmxlPExvZGdpbmc+IHtcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IHRoaXMuY3JlYXRlUmVxdWVzdEhlYWRlcigpO1xuICAgICAgICBjb25zdCB1cmwgPSBDb25maWcuYXBpVXJsICsgXCJhcGkvY3VzdG9tZXJzL2xvZGdpbmcvXCIgKyBhZ2VuY3lJZCArIFwiL1wiICsgbG9jYXRpb25JZCArIFwiL1wiICsgZGF0ZTtcbiAgICAgICAgY29uc29sZS5kaXIodXJsKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLmdldDxMb2RnaW5nPih1cmwsIHsgaGVhZGVycyB9KTtcbiAgICB9XG5cbiAgICBnZXRBbGxCeUdyb2VwV2l0aFJhZnRpbmdPcHRpb25BY3Rpb24oZ3JvZXBJZCk6IE9ic2VydmFibGU8QXJyYXk8UmFmdGluZ0N1c3RvbWVyPj4ge1xuICAgICAgICBjb25zdCBoZWFkZXJzID0gdGhpcy5jcmVhdGVSZXF1ZXN0SGVhZGVyKCk7XG4gICAgICAgIGNvbnN0IHVybCA9IENvbmZpZy5hcGlVcmwgKyBcImFwaS9jdXN0b21lcnMvZ3JvZXAvcmFmdGluZy9cIiArIGdyb2VwSWQ7XG4gICAgICAgIGNvbnNvbGUuZGlyKHVybCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQ8QXJyYXk8UmFmdGluZ0N1c3RvbWVyPj4odXJsLCB7IGhlYWRlcnMgfSk7XG4gICAgfVxuXG4gICAgZ2V0QWxsQnlHcm9lcFdpdGhDYW55b25pbmdPcHRpb25BY3Rpb24oZ3JvZXBJZCk6IE9ic2VydmFibGU8QXJyYXk8Q2FueW9uaW5nQ3VzdG9tZXI+PiB7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSB0aGlzLmNyZWF0ZVJlcXVlc3RIZWFkZXIoKTtcbiAgICAgICAgY29uc3QgdXJsID0gQ29uZmlnLmFwaVVybCArIFwiYXBpL2N1c3RvbWVycy9ncm9lcC9jYW55b25pbmcvXCIgKyBncm9lcElkO1xuICAgICAgICBjb25zb2xlLmRpcih1cmwpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0PEFycmF5PENhbnlvbmluZ0N1c3RvbWVyPj4odXJsLCB7IGhlYWRlcnMgfSk7XG4gICAgfVxuXG4gICAgZ2V0QWxsQnlHcm9lcFdpdGhTcGVjaWFsT3B0aW9uQWN0aW9uKGdyb2VwSWQpOiBPYnNlcnZhYmxlPEFycmF5PFNwZWNpYWxDdXN0b21lcj4+IHtcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IHRoaXMuY3JlYXRlUmVxdWVzdEhlYWRlcigpO1xuICAgICAgICBjb25zdCB1cmwgPSBDb25maWcuYXBpVXJsICsgXCJhcGkvY3VzdG9tZXJzL2dyb2VwL3NwZWNpYWwvXCIgKyBncm9lcElkO1xuICAgICAgICBjb25zb2xlLmRpcih1cmwpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0PEFycmF5PFNwZWNpYWxDdXN0b21lcj4+KHVybCwgeyBoZWFkZXJzIH0pO1xuICAgIH1cblxuICAgIGdldEJ1c0dvQ3VzdG9tZXJzQnlXZWVrKGRhdGUpOiBPYnNlcnZhYmxlPENoZWNraW5CdXM+IHtcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IHRoaXMuY3JlYXRlUmVxdWVzdEhlYWRlcigpO1xuICAgICAgICBjb25zdCB1cmwgPSBDb25maWcuYXBpVXJsICsgXCJhcGkvY3VzdG9tZXJzL2J1cy9nby9cIiArIGRhdGU7XG4gICAgICAgIGNvbnNvbGUuZGlyKHVybCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQ8Q2hlY2tpbkJ1cz4odXJsLCB7IGhlYWRlcnMgfSk7XG4gICAgfVxuXG4gICAgZ2V0QnVzQmFja0N1c3RvbWVyc0J5V2VlayhkYXRlKTogT2JzZXJ2YWJsZTxDaGVja2luQnVzPiB7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSB0aGlzLmNyZWF0ZVJlcXVlc3RIZWFkZXIoKTtcbiAgICAgICAgY29uc3QgdXJsID0gQ29uZmlnLmFwaVVybCArIFwiYXBpL2N1c3RvbWVycy9idXMvYmFjay9cIiArIGRhdGU7XG4gICAgICAgIGNvbnNvbGUuZGlyKHVybCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQ8Q2hlY2tpbkJ1cz4odXJsLCB7IGhlYWRlcnMgfSk7XG4gICAgfVxuXG4gICAgZ2V0QWxsQnlBbGxJblR5cGVGb3JMb2NhdGlvbkFuZFBlcmlvZEFjdGlvbihsb2NhdGlvbklkLCBkYXRlKTogT2JzZXJ2YWJsZTxWb2xwZW5zaW9uPiB7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSB0aGlzLmNyZWF0ZVJlcXVlc3RIZWFkZXIoKTtcbiAgICAgICAgY29uc3QgdXJsID0gQ29uZmlnLmFwaVVybCArIFwiYXBpL2N1c3RvbWVycy9hbGwtaW4tdHlwZS9cIiArIGxvY2F0aW9uSWQgKyBcIi9cIiArIGRhdGU7XG4gICAgICAgIGNvbnNvbGUuZGlyKHVybCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQ8Vm9scGVuc2lvbj4odXJsLCB7IGhlYWRlcnMgfSk7XG4gICAgfVxuXG4gICAgcHV0Q3VzdG9tZXJTaXplQWN0aW9uKGdyb2VwQ3VzdG9tZXI6IFNpemVDdXN0b21lcik6IE9ic2VydmFibGU8b2JqZWN0PiB7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSB0aGlzLmNyZWF0ZVJlcXVlc3RIZWFkZXIoKTtcbiAgICAgICAgY29uc3QgdXJsID0gQ29uZmlnLmFwaVVybCArIFwiYXBpL2N1c3RvbWVycy9zdWl0c2l6ZS9cIiArIGdyb2VwQ3VzdG9tZXIuaWQ7XG4gICAgICAgIGNvbnNvbGUuZGlyKHVybCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5wdXQodXJsLCBncm9lcEN1c3RvbWVyLCB7IGhlYWRlcnMgfSk7XG4gICAgfVxuXG4gICAgcHV0Q3VzdG9tZXJSYWZ0aW5nT3B0aW9uQWN0aW9uKHJhZnRpbmdDdXN0b21lcjogUmFmdGluZ0N1c3RvbWVyKTogT2JzZXJ2YWJsZTxvYmplY3Q+IHtcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IHRoaXMuY3JlYXRlUmVxdWVzdEhlYWRlcigpO1xuICAgICAgICBjb25zdCB1cmwgPSBDb25maWcuYXBpVXJsICsgXCJhcGkvY3VzdG9tZXJzL3JhZnRpbmcvXCIgKyByYWZ0aW5nQ3VzdG9tZXIuaWQ7XG4gICAgICAgIGNvbnNvbGUuZGlyKHVybCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5wdXQodXJsLCByYWZ0aW5nQ3VzdG9tZXIsIHsgaGVhZGVycyB9KTtcbiAgICB9XG5cbiAgICBwdXRDdXN0b21lckNhbnlvbmluZ09wdGlvbkFjdGlvbihjYW55b25pbmdDdXN0b21lcjogQ2FueW9uaW5nQ3VzdG9tZXIpOiBPYnNlcnZhYmxlPG9iamVjdD4ge1xuICAgICAgICBjb25zdCBoZWFkZXJzID0gdGhpcy5jcmVhdGVSZXF1ZXN0SGVhZGVyKCk7XG4gICAgICAgIGNvbnN0IHVybCA9IENvbmZpZy5hcGlVcmwgKyBcImFwaS9jdXN0b21lcnMvY2FueW9uaW5nL1wiICsgY2FueW9uaW5nQ3VzdG9tZXIuaWQ7XG4gICAgICAgIGNvbnNvbGUuZGlyKHVybCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5wdXQodXJsLCBjYW55b25pbmdDdXN0b21lciwgeyBoZWFkZXJzIH0pO1xuICAgIH1cblxuICAgIHB1dEN1c3RvbWVyU3BlY2lhbE9wdGlvbkFjdGlvbihzcGVjaWFsQ3VzdG9tZXI6IFNwZWNpYWxDdXN0b21lcik6IE9ic2VydmFibGU8b2JqZWN0PiB7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSB0aGlzLmNyZWF0ZVJlcXVlc3RIZWFkZXIoKTtcbiAgICAgICAgY29uc3QgdXJsID0gQ29uZmlnLmFwaVVybCArIFwiYXBpL2N1c3RvbWVycy9zcGVjaWFsL1wiICsgc3BlY2lhbEN1c3RvbWVyLmlkO1xuICAgICAgICBjb25zb2xlLmRpcih1cmwpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAucHV0KHVybCwgc3BlY2lhbEN1c3RvbWVyLCB7IGhlYWRlcnMgfSk7XG4gICAgfVxuXG4gICAgcHV0QnVzR29DdXN0b21lckFjdGlvbihidXNDdXN0b21lcjogQnVzQ3VzdG9tZXIpOiBPYnNlcnZhYmxlPG9iamVjdD4ge1xuICAgICAgICBjb25zdCBoZWFkZXJzID0gdGhpcy5jcmVhdGVSZXF1ZXN0SGVhZGVyKCk7XG4gICAgICAgIGNvbnN0IHVybCA9IENvbmZpZy5hcGlVcmwgKyBcImFwaS9jdXN0b21lcnMvYnVzL2dvL1wiICsgYnVzQ3VzdG9tZXIuaWQ7XG4gICAgICAgIGNvbnNvbGUuZGlyKHVybCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5wdXQodXJsLCBidXNDdXN0b21lciwgeyBoZWFkZXJzIH0pO1xuICAgIH1cblxuICAgIHB1dEJ1c0JhY2tDdXN0b21lckFjdGlvbihidXNDdXN0b21lcjogQnVzQ3VzdG9tZXIpOiBPYnNlcnZhYmxlPG9iamVjdD4ge1xuICAgICAgICBjb25zdCBoZWFkZXJzID0gdGhpcy5jcmVhdGVSZXF1ZXN0SGVhZGVyKCk7XG4gICAgICAgIGNvbnN0IHVybCA9IENvbmZpZy5hcGlVcmwgKyBcImFwaS9jdXN0b21lcnMvYnVzL2JhY2svXCIgKyBidXNDdXN0b21lci5pZDtcbiAgICAgICAgY29uc29sZS5kaXIodXJsKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLnB1dCh1cmwsIGJ1c0N1c3RvbWVyLCB7IGhlYWRlcnMgfSk7XG4gICAgfVxuXG4gICAgcHV0TG9kZ2luZ0xheW91dEN1c3RvbWVyQWN0aW9uKGxvZGdpbmdDdXN0b21lcjogTG9kZ2luZ0N1c3RvbWVyKTogT2JzZXJ2YWJsZTxvYmplY3Q+IHtcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IHRoaXMuY3JlYXRlUmVxdWVzdEhlYWRlcigpO1xuICAgICAgICBjb25zdCB1cmwgPSBDb25maWcuYXBpVXJsICsgXCJhcGkvY3VzdG9tZXJzL2xvZGdpbmcvbGF5b3V0L1wiICsgbG9kZ2luZ0N1c3RvbWVyLmlkO1xuICAgICAgICBjb25zb2xlLmRpcih1cmwpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAucHV0KHVybCwgbG9kZ2luZ0N1c3RvbWVyLCB7IGhlYWRlcnMgfSk7XG4gICAgfVxuXG4gICAgcHV0QmlsbFBheWVkQWN0aW9uKGJpbGxDdXN0b21lclRvdGFsOiBCaWxsQ3VzdG9tZXJUb3RhbCk6IE9ic2VydmFibGU8b2JqZWN0PiB7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSB0aGlzLmNyZWF0ZVJlcXVlc3RIZWFkZXIoKTtcbiAgICAgICAgY29uc3QgdXJsID0gQ29uZmlnLmFwaVVybCArIFwiYXBpL2N1c3RvbWVycy9iaWxsL1wiICsgYmlsbEN1c3RvbWVyVG90YWwuaWQ7XG4gICAgICAgIGNvbnNvbGUuZGlyKHVybCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5wdXQodXJsLCBiaWxsQ3VzdG9tZXJUb3RhbCwgeyBoZWFkZXJzIH0pO1xuICAgIH1cblxuICAgIHB1dENoZWNraW5DdXN0b21lckFjdGlvbihjaGVja2luQ3VzdG9tZXI6IENoZWNraW5DdXN0b21lcik6IE9ic2VydmFibGU8b2JqZWN0PiB7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSB0aGlzLmNyZWF0ZVJlcXVlc3RIZWFkZXIoKTtcbiAgICAgICAgY29uc3QgdXJsID0gQ29uZmlnLmFwaVVybCArIFwiYXBpL2N1c3RvbWVycy9jaGVja2luL1wiICsgY2hlY2tpbkN1c3RvbWVyLmlkO1xuICAgICAgICBjb25zb2xlLmRpcih1cmwpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAucHV0KHVybCwgY2hlY2tpbkN1c3RvbWVyLCB7IGhlYWRlcnMgfSk7XG4gICAgfVxuXG4gICAgcHV0Q2hlY2tpbkN1c3RvbWVyRGV0YWlsQWN0aW9uKGNoZWNraW5DdXN0b21lckRldGFpbDogQ2hlY2tpbkN1c3RvbWVyRGV0YWlsKTogT2JzZXJ2YWJsZTxvYmplY3Q+IHtcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IHRoaXMuY3JlYXRlUmVxdWVzdEhlYWRlcigpO1xuICAgICAgICBjb25zdCB1cmwgPSBDb25maWcuYXBpVXJsICsgXCJhcGkvY3VzdG9tZXJzL2NoZWNraW4vZGV0YWlsL1wiICsgY2hlY2tpbkN1c3RvbWVyRGV0YWlsLmlkO1xuICAgICAgICBjb25zb2xlLmRpcih1cmwpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAucHV0KHVybCwgY2hlY2tpbkN1c3RvbWVyRGV0YWlsLCB7IGhlYWRlcnMgfSk7XG4gICAgfVxuXG4gICAgcHV0UGF5bWVudFRvQ3VzdG9tZXJBY3Rpb24ocGF5bWVudDogUGF5bWVudCk6IE9ic2VydmFibGU8b2JqZWN0PiB7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSB0aGlzLmNyZWF0ZVJlcXVlc3RIZWFkZXIoKTtcbiAgICAgICAgY29uc3QgdXJsID0gQ29uZmlnLmFwaVVybCArIFwiYXBpL2N1c3RvbWVycy9wYXltZW50cy9cIiArIHBheW1lbnQuY3VzdG9tZXJJZDtcbiAgICAgICAgY29uc29sZS5kaXIodXJsKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLnB1dCh1cmwsIHBheW1lbnQsIHsgaGVhZGVycyB9KTtcbiAgICB9XG59XG4iXX0=